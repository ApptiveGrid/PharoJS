// generated by PharoJS *** DO NOT EDIT *** on 2016-12-05T12:33:20.19715+01:00
var global=global||this
global.Smalltalk=global.Smalltalk||{}
function PjClass(){};
Smalltalk.theClassClass=PjClass;
Smalltalk._makeGetter_ = function(selector){return function Getter(){return this[selector]}}
Smalltalk._propertySet_ = function(func){return {
enumerable: false,
configurable: false,
writable: true,
value: func}}
Smalltalk._initThrowInJs = function(){global[(this._throwFunctionName())]=this._throwFunction();return this}
Smalltalk._initNilInJs = function(){global[(this._nilTestFunctionName())]=this._nilIfUndefined();return this}
Smalltalk._nilIfUndefined = function(){var pjCore=this;return function(arg){if(arg == undefined){
return pjCore.nilInJs;
}
return arg}}
Smalltalk._throwFunction = function(){return function(arg){throw arg}}
Smalltalk._makeSetter_ = function(selector){return function Setter(value){return this[selector]=value}}
Smalltalk._log_ = function(message){console.log(message);return this}
Smalltalk._nilTestFunctionName = function(){return "$asNil$"}
Smalltalk._installDNU_arguments_selector_js_for_else_ = function(aType,args,selector,jsSelector,anObject,aBlock){var type,func;type=aType;if(true==(0!=type&&1!=type&&2!=type&&$asNil$((type=anObject[selector]))._notNil()))if($asNil$(type)._typeof()=="function")type=2;else type=args.length;if(0==type){func=this._makeGetter_(selector);Object.defineProperty(anObject.__proto__,jsSelector,this._propertySet_(func));return func.call(anObject)}if(1==type){func=this._makeSetter_(selector);Object.defineProperty(anObject.__proto__,jsSelector,this._propertySet_(func));return func.call(anObject,args[0])}if(2<=type){type=anObject;while(true==$asNil$(type)._notNil()){if(true==(true==type.hasOwnProperty(selector)&&$asNil$(type[selector])._typeof()=="function")){func=type[selector];Object.defineProperty(type,jsSelector,this._propertySet_(func));return func.apply(anObject,args)}type=$asNil$(type)._instVarNamed_("__proto__")}}return $asNil$(aBlock)._value()}
Smalltalk._selector_arguments_ = function(selector,args){if(this.messageClass!==this)
return this.messageClass._selector_arguments_(selector,arguments);
return {
selector: selector,
_selector: function(){return this.selector},
arguments: args,
_arguments: function(){return this.arguments}
}}
Smalltalk._makeSmalltalkSelector_ = function(aSelector){var result;if(aSelector[0]!="_")return aSelector;if((sel=this.selectorCache[aSelector])!=undefined)return sel;result=aSelector.split("_");result.shift();if(result[0][0]>"9")return result.join(":");result.pop();for(var index=0,$1=result.length-1;index<=$1;++index){result[index]=String._value_(result[index])}result=result.join("");if(this.selectorCache[result]==undefined)this.selectorCache[result]=aSelector;if(this.selectorCache[aSelector]==undefined)this.selectorCache[aSelector]=result;return result}
Smalltalk._emptyJavascriptObject = function(){return {}}
Smalltalk._makeDNU_ = function(aSelector){var pjCore=this;
return function __DNU() {
return this._doesNotUnderstand_(
pjCore._selector_arguments_(pjCore._makeSmalltalkSelector_(aSelector),
[].slice.call(arguments)))}}
Smalltalk._makeDnu2_ = function(aSelector){var pjCore=this;
return function __DNU(arg1,arg2) {
return this._doesNotUnderstand_(
pjCore._selector_arguments_(pjCore._makeSmalltalkSelector_(aSelector),[arg1,arg2]))}}
Smalltalk._handleDNU_for_ = function(aMessage,anObject){var selector,type,$_self_$=this;selector=(($asNil$(aMessage)._selector()).split(":"))[0];type=selector.split("_");return this._installDNU_arguments_selector_js_for_else_(type,$asNil$(aMessage)._arguments(),selector,this._makeJavascriptSelector_($asNil$(aMessage)._selector()),anObject,function(){return $_self_$._error_("Message not understood: "+$asNil$(anObject)._className()+">>#"+$asNil$(aMessage)._selector())})}
Smalltalk._metaclassOf_ = function(aClass){if(this.metaclassClass!==this) return this.metaclassClass._metaclassOf_(aClass);
var theMetaClass={ prototype: aClass.__proto__,__proto__:this.theClassClass.prototype,
_name: function(){return aClass._name()+" class"},
_theNonMetaClass: function(){return aClass},
_theMetaClass: function(){return theMetaClass},
};
return theMetaClass}
Smalltalk._makeJavascriptSelector_ = function(aSelector){var result;if(aSelector[0]=="_")return aSelector;if((sel=this.selectorCache[aSelector])!=undefined)return sel;if((sel=aSelector)!=undefined){if(true==$asNil$(sel)._isLetter())result=(":"+sel).split(":");else {result=[undefined];for(var idx=1,$1=$asNil$(sel)._size();idx<=$1;++idx){result.push((sel.charCodeAt(idx-1)).toString())}result.push(undefined)}result=result.join("_")}if(this.selectorCache[result]==undefined)this.selectorCache[result]=aSelector;if(this.selectorCache[aSelector]==undefined)this.selectorCache[aSelector]=result;return result}
Smalltalk._subclass_ = function(aClassName){var subclass = (function(){
if(typeof aClassName == "string"){
if(this[aClassName])return this[aClassName];
aClassName=(new Function("return function "+aClassName+"(){}"))()}
if(this[aClassName.name]==aClassName)return aClassName;
return this[aClassName.name]=aClassName})();
subclass.__proto__ = {__proto__ : this.__proto__};
subclass.subclasses=[];
if(subclass!=this) { 
subclass.prototype.__proto__ = this.prototype;
this.subclasses.push(subclass);
}}
Smalltalk._makeDnu0_ = function(aSelector){var pjCore=this;
return function __DNU() {
return this._doesNotUnderstand_(
pjCore._selector_arguments_(pjCore._makeSmalltalkSelector_(aSelector),[]))}}
Smalltalk._throwFunctionName = function(){return "$throw$"}
Smalltalk._keys_ = function(anObject){var result=[];
for (var i in anObject) { if(typeof anObject[i]!="function" && anObject[i]!==null) result.push(i) }
return JSON.stringify(result.sort())}
Smalltalk._metaclassClass_ = function(anObject){this.metaclassClass=anObject;return this}
Smalltalk._makeDnuN_ = function(aSelector){var pjCore=this;
return function __DNU() {
var args=new Array(arguments.length);
for(var i=0;i<arguments.length;++i) args[i]=arguments[i]
return this._doesNotUnderstand_(
pjCore._selector_arguments_(pjCore._makeSmalltalkSelector_(aSelector),args))}}
Smalltalk._messageClass_ = function(anObject){this.messageClass=anObject;return this}
Smalltalk._registerDnuForAll_ = function(anArray){var $_self_$=this;anArray.forEach(function(each){return $_self_$._registerDnu_(each)});return this}
Smalltalk._initializeCore = function(){this.selectorCache=this._emptyJavascriptObject();this._initNilInJs();this._initThrowInJs();this._initObject();this._messageClass_(this);this._metaclassClass_(this);return this}
Smalltalk._makeSubclass = function(){var pjCore=this;return function(aClassName){
var subclass = (function(){
if(typeof aClassName == "string"){
if(this[aClassName])return this[aClassName];
aClassName=(new Function("return function "+aClassName+"(){}"))()}
if(this[aClassName.name]==aClassName)return aClassName;
return this[aClassName.name]=aClassName})();
subclass.subclasses=[];
if(subclass==this) {
this.__proto__ = {__proto__ : pjCore.theClassClass.prototype};
}else{ 
subclass.__proto__ = {__proto__ : this.__proto__};
subclass.prototype.__proto__ = this.prototype;
this.subclasses.push(subclass);
}}}
Smalltalk._install_asGlobalNamed_ = function(anObject,jsName){global[jsName]=anObject;return this}
Smalltalk._makeDnu1_ = function(aSelector){var pjCore=this;
return function __DNU(arg1) {
return this._doesNotUnderstand_(
pjCore._selector_arguments_(pjCore._makeSmalltalkSelector_(aSelector),[arg1]))}}
Smalltalk._registerDnu_ = function(aSelector){var selector,props;selector=this._makeJavascriptSelector_(aSelector);if(Object.prototype[selector]==undefined){props=this._makeDNU_(aSelector);Object.defineProperty(Object.prototype,selector,this._propertySet_(props))}return selector}
Smalltalk._initObject = function(){Object.__proto__._subclass_=this._makeSubclass();this.theClassClass.prototype.__proto__=Function.prototype;return this}
Smalltalk._nilInJs_ = function(anObject){this.nilInJs=anObject;return this}
Smalltalk._initializeCore();
function PjUndefinedObject(){};
function PjDictionary(){};
function PjAssociation(){};
function PjMagnitude(){};
function PjLookupKey(){};
function PjCollection(){};
Object._subclass_(Object);
Object.prototype._removeKey_ = function(key){var result=this[key];delete this[key];return result}
Object.prototype._associationsDo_ = function(aBlock){this._keysAndValuesDo_(function(key,value){return $asNil$(aBlock)._value_(PjAssociation._key_value_(key,value))});return this}
Object.prototype._initialize = function(){return this}
Object.prototype._61_61_ = function(other){return this===other}
Object.prototype._yourself = function(){return this}
Object.prototype._keysDo_ = function(aBlock){for (var i in this){if(this.hasOwnProperty(i))aBlock._value_(i)};
return this;}
Object.prototype._126_61_ = function(other){return $asNil$((this==other))._not()}
Object.prototype._61_ = function(other){return this==other}
Object.prototype._at_ = function(key){return this[key]}
Object.prototype._typeof = function(){return typeof this}
Object.prototype._flag_ = function(aSymbol){return this}
Object.prototype._at_put_ = function(key,value){return this[key]=value}
Object.prototype._perform_with_with_with_ = function(selector,arg1,arg2,arg3){return $asNil$(this[(Smalltalk._registerDnu_(selector))])._call_with_with_with_(this,arg1,arg2,arg3)}
Object.prototype._perform_withArguments_inSuperclass_ = function(selector,argArray,lookupClass){return $asNil$(($asNil$(lookupClass)._prototype())[(Smalltalk._registerDnu_(selector))])._apply_with_(this,argArray)}
Object.prototype._isEmpty = function(){var $_err_$={};try{this._keysDo_(function(){throw $_err_$=false});return true}catch(e){if(e===$_err_$)return e;throw e}}
Object.prototype._class = function(){return this.constructor}
Object.prototype._perform_ = function(selector){return $asNil$(this[(Smalltalk._registerDnu_(selector))])._call_(this)}
Object.prototype._proxyResponse = function(){var name = this.$_jsName;
if (!name) {
Object.$Pj_counter = (Object.$Pj_counter||0)+1;
name = "$_"+Object.$Pj_counter;
(function(){return this})()[name]=this;
Object.defineProperty(this,"$_jsName",{value:name,writable:true});
}
return { remove : this.$PjProxyRemove , proxy : name}}
Object.prototype._add_ = function(assoc){var $_self_$=this;return Smalltalk._installDNU_arguments_selector_js_for_else_(undefined,[],"value","_value",this,function(){return $_self_$[($asNil$(assoc)._key())]=$asNil$(assoc)._value()})}
Object.prototype._at_ifPresent_ifAbsent_ = function(key,aBlock,anotherBlock){if(true==this.hasOwnProperty(key))return $asNil$(aBlock)._cull_(this[key]);return $asNil$(anotherBlock)._value()}
Object.prototype._keysAndValuesDo_ = function(aBlock){for (var i in this){if(this.hasOwnProperty(i))aBlock._value_value_(i,this[i])};
return this;}
Object.prototype._typeof_ = function(anObject){return typeof anObject}
Object.prototype._doesNotUnderstand_ = function(aMessage){return Smalltalk._handleDNU_for_(aMessage,this)}
Object.prototype._instVarNamed_put_ = function(aString,anObject){return this[aString]=anObject}
Object.prototype._includesKey_ = function(key){return this.hasOwnProperty(key)}
Object.prototype._keys = function(){var result;result=Array._new();this._keysDo_(function(key){return $asNil$(result)._addLast_(key)});return result}
Object.prototype._perform_withArguments_ = function(selector,argArray){return $asNil$(this[(Smalltalk._registerDnu_(selector))])._apply_with_(this,argArray)}
Object.prototype._valuesDo_ = function(aBlock){for (var i in this){if(this.hasOwnProperty(i))aBlock._value_(this[i])};
return this;}
Object.prototype._instVarNamed_ = function(aString){return this[aString]}
Object.prototype._perform_with_ = function(selector,arg){return $asNil$(this[(Smalltalk._registerDnu_(selector))])._call_with_(this,arg)}
Object.prototype._126_126_ = function(other){return $asNil$((this===other))._not()}
Object.prototype._at_ifPresent_ = function(key,aBlock){if(false==this.hasOwnProperty(key))return undefined;return $asNil$(aBlock)._cull_(this[key])}
Object.prototype._perform_with_with_ = function(selector,arg1,arg2){return $asNil$(this[(Smalltalk._registerDnu_(selector))])._call_with_with_(this,arg1,arg2)}
Object.prototype._at_ifAbsent_ = function(key,aBlock){if(true==this.hasOwnProperty(key))return this[key];return $asNil$(aBlock)._value()}
Object.prototype._species = function(){return this._class()}
Object.prototype._value = function(){var $_self_$=this;return Smalltalk._installDNU_arguments_selector_js_for_else_(undefined,[],"value","_value",this,function(){return $_self_$})}
Object.prototype._addAll_ = function(aCollection){var $_self_$=this;$asNil$(aCollection)._do_(function(each){return $_self_$._add_(each)});return aCollection}
Object.prototype._isCollection = function(){return false}
Object.prototype._isNumber = function(){return false}
Object.prototype._isKindOf_ = function(aClass){if(this._class()===aClass)return true;else return $asNil$(this._class())._inheritsFrom_(aClass)}
Object.prototype._as_ = function(aSimilarClass){return $asNil$(aSimilarClass)._newFrom_(this)}
Object.prototype._error_ = function(aString){return $asNil$(Error._new())._signal_(aString)}
Object.prototype._asOrderedCollection = function(){return Array._with_(this)}
Object.prototype._isBehavior = function(){return false}
Object.prototype._isString = function(){return false}
Object.prototype._isMemberOf_ = function(aClass){return this._class()===aClass}
Object.prototype._respondsTo_ = function(aSymbol){return $asNil$(this._class())._canUnderstand_(aSymbol)}
Object.prototype._isBlock = function(){return false}
Object.prototype._isArray = function(){return false}
Object.prototype._45_62_ = function(anObject){return $asNil$(PjAssociation._basicNew())._key_value_(this,anObject)}
Object.prototype._notNil = function(){return true}
Object.prototype._isClass = function(){return false}
Object.prototype._className = function(){return $asNil$($asNil$(this._class())._name())._asString()}
Object.prototype._isNotNil = function(){return true}
Object.prototype._do_ = function(aBlock){return this._valuesDo_(aBlock)}
Object.prototype._ifNotNil_ = function(ifNotNilBlock){return $asNil$(ifNotNilBlock)._cull_(this)}
Object.prototype._ifNil_ = function(nilBlock){return this}
Object.prototype._ifNotNil_ifNil_ = function(ifNotNilBlock,nilBlock){return $asNil$(ifNotNilBlock)._cull_(this)}
Object.prototype._isNil = function(){return false}
Object.prototype._ifNil_ifNotNil_ = function(nilBlock,ifNotNilBlock){return $asNil$(ifNotNilBlock)._cull_(this)}
Object.__proto__._addDnuSupportFor_ = function(selector){if(Object.prototype[selector] != undefined){return;}
Object.prototype.selector =  function(){
throw "Does not understand message " + selector;};}
Object.__proto__._resultObject_ = function(result){if (result != undefined) return result._proxyResponse();
if (result === undefined) return { proxy : "undefined"};
return { proxy : "null"};}
Object.__proto__._newFrom_ = function(aDict){var newDictionary,$_self_$=this;newDictionary=this._new_($asNil$(aDict)._size());$asNil$(aDict)._associationsDo_(function(x){if(true==$asNil$(newDictionary)._includesKey_($asNil$(x)._key()))return $_self_$._error_("Duplicate key: "+$asNil$($asNil$(x)._key())._printString());else return $asNil$(newDictionary)._add_(x)});return newDictionary}
Object.__proto__._newFromPairs_ = function(anArray){var newDictionary;newDictionary=this._new_($asNil$(anArray)._size()/2);for(var i=1,$1=$asNil$(anArray)._size()-1;i<=$1;i+=2){$asNil$(newDictionary)._at_put_($asNil$(anArray)._at_(i),$asNil$(anArray)._at_(i+1))}return newDictionary}
Object._subclass_(Boolean);
Boolean.prototype._ifTrue_ = function(aBlock){return this._ifTrue_ifFalse_(aBlock,function(){return undefined})}
Boolean.prototype._ifFalse_ = function(aBlock){return this._ifTrue_ifFalse_(function(){return undefined},aBlock)}
Boolean.prototype._ifFalse_ifTrue_ = function(falseBlock,trueBlock){return this._ifTrue_ifFalse_(trueBlock,falseBlock)}
Boolean.prototype._38_ = function(aBoolean){if(true==this)return aBoolean;else return false}
Boolean.prototype._proxyResponse = function(){return { basic: true==this};}
Boolean.prototype._not = function(){if(true==this)return false;else return true}
Boolean.prototype._or_ = function(aBlock){if(this==true){return true}else{return aBlock()}}
Boolean.prototype._61_61_ = function(other){return this==other}
Boolean.prototype._asBit = function(){return this + 0}
Boolean.prototype._124_ = function(aBoolean){if(true==this)return true;else return aBoolean}
Boolean.prototype._61_ = function(other){return this==Boolean(other)}
Boolean.prototype._126_126_ = function(other){return this!=other}
Boolean.prototype._asString = function(){return this + ""}
Boolean.prototype._xor_ = function(aBoolean){if(true==this)return $asNil$($asNil$(aBoolean)._value())._not();else return $asNil$(aBoolean)._value()}
Boolean.prototype._ifTrue_ifFalse_ = function(trueBlock,falseBlock){if(this==true){return trueBlock()}else{return falseBlock()}}
Boolean.prototype._and_ = function(aBlock){if(this==true){return aBlock();}else{return false;}}
Object._subclass_(Error);
Error.prototype._messageText_ = function(anObject){this.message=anObject;return this}
Error.prototype._signal = function(){throw this}
Error.prototype._messageText = function(){return this.message}
Error.prototype._signal_ = function(aString){this._messageText_(aString);return this._signal()}
Error.__proto__._signal = function(){return $asNil$(this._new())._signal()}
Error.__proto__._signal_ = function(aString){return $asNil$(this._new())._signal_(aString)}
Object._subclass_(Number);
(function($$){
$$.E_=function($0){return $$.E=$0};
$$.Epsilon_=function($0){return $$.Epsilon=$0};
$$.Halfpi_=function($0){return $$.Halfpi=$0};
$$.Infinity_=function($0){return $$.Infinity=$0};
$$.Ln10_=function($0){return $$.Ln10=$0};
$$.Ln2_=function($0){return $$.Ln2=$0};
$$.MaxVal_=function($0){return $$.MaxVal=$0};
$$.MaxValLn_=function($0){return $$.MaxValLn=$0};
$$.MinValLogBase2_=function($0){return $$.MinValLogBase2=$0};
$$.NaN_=function($0){return $$.NaN=$0};
$$.NegativeInfinity_=function($0){return $$.NegativeInfinity=$0};
$$.NegativeZero_=function($0){return $$.NegativeZero=$0};
$$.Pi_=function($0){return $$.Pi=$0};
$$.RadiansPerDegree_=function($0){return $$.RadiansPerDegree=$0};
$$.Sqrt2_=function($0){return $$.Sqrt2=$0};
$$.ThreePi_=function($0){return $$.ThreePi=$0};
$$.Twopi_=function($0){return $$.Twopi=$0};})(Number.prototype);
Number.prototype._sin = function(){return Math.sin(this);}
Number.prototype._92_92_ = function(anObject){return this._37_(anObject)}
Number.prototype._61_61_ = function(other){return this == other}
Number.prototype._arcCos = function(){return Math.acos(this);}
Number.prototype._124_ = function(anObject){return this | anObject;}
Number.prototype._61_ = function(other){return this == other}
Number.prototype._126_61_ = function(other){return this != other}
Number.prototype._45_ = function(anObject){return this - anObject;}
Number.prototype._asString = function(){return this + "";}
Number.prototype._degreesToRadians = function(){return this*this.RadiansPerDegree}
Number.prototype._truncated = function(){if (this>=0)return Math.floor(this);return Math.ceil(this)}
Number.prototype._43_ = function(anObject){return this + anObject;}
Number.prototype._arcTan = function(){return Math.atan(this);}
Number.prototype._sqrt = function(){return Math.sqrt(this);}
Number.prototype._47_ = function(anObject){return this / anObject;}
Number.prototype._arcTan_ = function(denominator){return Math.atan2(this,denominator);}
Number.prototype._60_ = function(other){return this < other}
Number.prototype._to_by_do_ = function(end,step,aBlock){for(var i=this; i <= end; i += step){aBlock(i);}}
Number.prototype._timesRepeat_ = function(aBlock){(1)._to_do_(this,aBlock);return this}
Number.prototype._proxyResponse = function(){return { basic: 0+this};}
Number.prototype._abs = function(){return Math.abs(this);}
Number.prototype._log = function(){return Math.log10(this);}
Number.prototype._47_47_ = function(anObject){return Math.floor(this / anObject)}
Number.prototype._asFloat = function(){return +self}
Number.prototype._sign = function(){return Math.sign(this);}
Number.prototype._tan = function(){return Math.tan(this);}
Number.prototype._exp = function(){return Math.exp(this);}
Number.prototype._to_do_ = function(end,aBlock){this._to_by_do_(end,1,aBlock);return this}
Number.prototype._arcSin = function(){return Math.asin(this);}
Number.prototype._ln = function(){return Math.log(this);}
Number.prototype._37_ = function(anObject){return Math.sign(anObject)*(Math.abs(this) % anObject)}
Number.prototype._cos = function(){return Math.cos(this);}
Number.prototype._42_ = function(anObject){return this * anObject;}
Number.prototype._max_ = function(aMagnitude){if(this>aMagnitude)return this;else return aMagnitude}
Number.prototype._compareWith_ifLesser_ifEqual_ifGreater_ = function(anotherMagnitude,lesserBlock,equalBlock,greaterBlock){var $_self_$=this;return $asNil$((this<anotherMagnitude))._ifTrue_ifFalse_(lesserBlock,function(){return $asNil$(($_self_$==anotherMagnitude))._ifTrue_ifFalse_(equalBlock,greaterBlock)})}
Number.prototype._60_61_ = function(aMagnitude){return $asNil$((this>aMagnitude))._not()}
Number.prototype._between_and_ = function(min,max){if(this>=min)return this<=max;else return false}
Number.prototype._min_max_ = function(aMin,aMax){return $asNil$(this._min_(aMin))._max_(aMax)}
Number.prototype._62_ = function(aMagnitude){return aMagnitude<this}
Number.prototype._min_ = function(aMagnitude){if(this<aMagnitude)return this;else return aMagnitude}
Number.prototype._62_61_ = function(aMagnitude){return aMagnitude<=this}
Number.prototype._rounded = function(){if($asNil$(this._fractionPart())._abs()<0.5)return this._truncated();else return this._truncated()+$asNil$(this._sign())._rounded()}
Number.prototype._odd = function(){return this._even()===false}
Number.prototype._isNumber = function(){return true}
Number.prototype._log_ = function(aNumber){return this._ln()/$asNil$(aNumber)._ln()}
Number.prototype._squared = function(){return this*this}
Number.prototype._isNaN = function(){return false}
Number.prototype._integerPart = function(){return this._truncated()}
Number.prototype._reciprocal = function(){return 1/this}
Number.prototype._fractionPart = function(){return this-this._integerPart()}
Number.prototype._negated = function(){return 0-this}
Number.prototype._even = function(){return this%2==0}
Number.prototype._asInteger = function(){return this._truncated()}
Number.prototype._asCharacter = function(){return String._value_(this)}
Number.__proto__._javascriptInitialize = function(){this.prototype.Pi=$asNil$(Math)._instVarNamed_("PI");this.prototype.Halfpi=this.prototype.Pi/2.0;this.prototype.Twopi=this.prototype.Pi*2.0;this.prototype.ThreePi=this.prototype.Pi*3.0;this.prototype.RadiansPerDegree=this.prototype.Pi/180.0;this.prototype.Ln2=$asNil$(Math)._instVarNamed_("LN2");this.prototype.Ln10=$asNil$(Math)._instVarNamed_("LN10");this.prototype.Sqrt2=$asNil$(Math)._instVarNamed_("SQRT2");this.prototype.E=$asNil$(Math)._instVarNamed_("E");this.prototype.Epsilon=1.0e-12;this.prototype.MaxVal=Number._instVarNamed_("MAX_VALUE");this.prototype.MaxValLn=709.782712893384;this.prototype.MinValLogBase2=-1074;this.prototype.Infinity=Number._instVarNamed_("POSITIVE_INFINITY");this.prototype.NegativeInfinity=Number._instVarNamed_("NEGATIVE_INFINITY");this.prototype.NaN=Number._instVarNamed_("NaN");this.prototype.NegativeZero=1.0/this.prototype.NegativeInfinity;return this}
Object._subclass_(PjUndefinedObject);
PjUndefinedObject.prototype._61_ = function(other){return undefined==other}
PjUndefinedObject.prototype._ifNotNil_ifNil_ = function(ifNotNilBlock,nilBlock){return $asNil$(nilBlock)._value()}
PjUndefinedObject.prototype._isNotNil = function(){return false}
PjUndefinedObject.prototype._ifNotNil_ = function(aBlock){return this}
PjUndefinedObject.prototype._ifNil_ = function(aBlock){return $asNil$(aBlock)._value()}
PjUndefinedObject.prototype._notNil = function(){return false}
PjUndefinedObject.prototype._isNil = function(){return true}
PjUndefinedObject.prototype._ifNil_ifNotNil_ = function(nilBlock,ifNotNilBlock){return $asNil$(nilBlock)._value()}
PjUndefinedObject.prototype._isEmptyOrNil = function(){return true}
PjUndefinedObject.__proto__._new = function(){return Smalltalk._signal_("cannot create instances of UndefinedObject")}
PjUndefinedObject.__proto__._javascriptInitialize = function(){Smalltalk._nilInJs_(this._basicNew());return this}
Object._subclass_(Function);
Function.prototype._on_do_ = function(exception,handlerAction){try{
this()
}catch(ex){
if(ex._isKindOf_(exception)){return handlerAction(ex)}
throw ex
}}
Function.prototype._new_with_with_ = function(arg1,arg2,arg3){var $1;return ($1=$asNil$(this._basicNew_with_with_(arg1,arg2,arg3)),$1._initialize(),$1._yourself())}
Function.prototype._basicNew = function(){return new this()}
Function.prototype._new = function(){var $1;return ($1=$asNil$(this._basicNew()),$1._initialize(),$1._yourself())}
Function.prototype._new_with_with_with_ = function(arg1,arg2,arg3,arg4){var $1;return ($1=$asNil$(this._basicNew_with_with_with_(arg1,arg2,arg3,arg4)),$1._initialize(),$1._yourself())}
Function.prototype._basicNew_with_ = function(arg1,arg2){return new this(arg1, arg2)}
Function.prototype._value_ = function(arg){return this(arg);}
Function.prototype._whileTrue = function(){this._whileTrue_(function(){return undefined});return this}
Function.prototype._new_with_ = function(arg1,arg2){var $1;return ($1=$asNil$(this._basicNew_with_(arg1,arg2)),$1._initialize(),$1._yourself())}
Function.prototype._new_ = function(arg){var $1;return ($1=$asNil$(this._basicNew_(arg)),$1._initialize(),$1._yourself())}
Function.prototype._close = function(){Smalltalk._log_("unoptimized close may not capture semantics");return this}
Function.prototype._new_with_with_with_with_ = function(arg1,arg2,arg3,arg4,arg5){var $1;return ($1=$asNil$(this._basicNew_with_with_with_with_(arg1,arg2,arg3,arg4,arg5)),$1._initialize(),$1._yourself())}
Function.prototype._whileTrue_ = function(loopBlock){while(true==this()){loopBlock();}}
Function.prototype._basicNew_with_with_ = function(arg1,arg2,arg3){return new this(arg1, arg2, arg3)}
Function.prototype._valueWithArguments_ = function(anArray){return this.apply(this,anArray)}
Function.prototype._whileFalse = function(){this._whileFalse_(function(){return undefined});return this}
Function.prototype._basicNew_with_with_with_ = function(arg1,arg2,arg3,arg4){return new this(arg1, arg2, arg3, arg4)}
Function.prototype._value_value_ = function(arg1,arg2){return this(arg1, arg2);}
Function.prototype._basicNew_with_with_with_with_ = function(arg1,arg2,arg3,arg4,arg5){return new this(arg1, arg2, arg3, arg4, arg5)}
Function.prototype._ensure_ = function(aBlock){try{
return this()
}finally{aBlock()}}
Function.prototype._cull_cull_ = function(arg1,arg2){return this._value_value_(arg1,arg2)}
Function.prototype._whileFalse_ = function(loopBlock){while(false==this()){loopBlock();}}
Function.prototype._ifCurtailed_ = function(curtailBlock){var result,curtailed,$_self_$=this;curtailed=true;(function(){result=$_self_$._value();return curtailed=false})._ensure_(function(){if(true==curtailed)return $asNil$(curtailBlock)._value();else return undefined});return result}
Function.prototype._basicNew_ = function(arg){return new this(arg)}
Function.prototype._value = function(){return this();}
Function.prototype._cull_ = function(arg){return this._value_(arg)}
Function.prototype._isBlock = function(){return true}
Function.__proto__._forceSubclass_ = function(aFunction){aFunction.__proto__=this.prototype;return this}
Function._subclass_(PjClass);
PjClass.prototype._name = function(){var s=this.name||this.prototype.toString();
if (s.substr(0,1)=="[") s=s.substr(8,s.length-9);
return s}
PjClass.prototype._isBlock = function(){return false}
PjClass.prototype._canUnderstand_ = function(selector){var jsSelector;jsSelector=Smalltalk._makeJavascriptSelector_(selector);if((selct=(this._prototype())[jsSelector])==undefined)return false;else return "__DNU"!=selct.name}
PjClass.prototype._newFromJsonString_ = function(jsonString){var newInstance;newInstance=JSON.parse(jsonString);this._adoptInstance_(newInstance);return newInstance}
PjClass.prototype._subclasses = function(){return this.subclasses}
PjClass.prototype._theMetaClass = function(){return this._class()}
PjClass.prototype._superclass = function(){if(this===Object)return undefined;return $asNil$(this.prototype.__proto__)._class()}
PjClass.prototype._isClass = function(){return true}
PjClass.prototype._theNonMetaClass = function(){return this}
PjClass.prototype._adoptInstance_ = function(anObject){anObject.__proto__=this.prototype;return this}
PjClass.prototype._prototype = function(){return this.prototype}
PjClass.prototype._class = function(){return Smalltalk._metaclassOf_(this)}
PjClass.prototype._allSubclassesDo_ = function(aBlock){this._subclassesDo_(function(cl){$asNil$(aBlock)._value_(cl);return $asNil$(cl)._allSubclassesDo_(aBlock)});return this}
PjClass.prototype._inheritsFrom_ = function(aClass){var aSuperclass;aSuperclass=this._superclass();while(aSuperclass!==undefined){if(aSuperclass===aClass)return true;aSuperclass=$asNil$(aSuperclass)._superclass()}return false}
PjClass.prototype._subclassesDo_ = function(aBlock){$asNil$(this._subclasses())._do_(aBlock);return this}
PjClass.prototype._isBehavior = function(){return true}
Object._subclass_(Array);
Array.prototype._includes_ = function(x){return 0<this._indexOf_(x)}
Array.prototype._indexOf_ = function(x){return this.indexOf(x)+1}
Array.prototype._addFirst_ = function(x){this.unshift(x);return x}
Array.prototype._removeAt_ = function(aNumber){var result=this[aNumber-1];this.splice(aNumber - 1,1);return result}
Array.prototype._44_ = function(other){var $1;return ($1=$asNil$($asNil$(this._class())._new()),$1._addAll_(this),$1._addAll_(other),$1._yourself())}
Array.prototype._61_ = function(anArray){if(this.length!=anArray.length)return false;for(var i=0,max=this.length;i<max;++i)if(this[i]!=anArray[i])return false;return true}
Array.prototype._at_ = function(i){return this[i-1]}
Array.prototype._do_ = function(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i]);return this}
Array.prototype._withIndexDo_ = function(aBlock){for(var i=0,max=this.length;i<max;++i)aBlock(this[i],i+1);return this}
Array.prototype._at_put_ = function(i,x){return this[i-1]=x}
Array.prototype._third = function(){return this[2]}
Array.prototype._isEmpty = function(){return this._size()==0}
Array.prototype._size = function(){return this.length}
Array.prototype._first = function(){return this[0]}
Array.prototype._addLast_ = function(x){this.push(x);return x}
Array.prototype._select_ = function(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i){if(true==aBlock(this[i]))result.push(this[i])}return result}
Array.prototype._do_separatedBy_ = function(elementBlock,separatorBlock){for(var i=0,max=this.length;i<max;++i){if(i)separatorBlock();elementBlock(this[i])};return this}
Array.prototype._add_ = function(x){return this._addLast_(x)}
Array.prototype._removeLast = function(){return this.pop()}
Array.prototype._collect_ = function(aBlock){var result=[];for(var i=0,max=this.length;i<max;++i)result.push(aBlock(this[i]));return result}
Array.prototype._removeFirst = function(){return this.shift()}
Array.prototype._replaceFrom_to_with_startingAt_ = function(start,stop,replacement,repStart){for(var mine=stop-1,other=mine+repStart-start;
mine>=start-1;
--other,--mine
)this[mine]=replacement[other];return this}
Array.prototype._second = function(){return this[1]}
Array.prototype._remove_ifAbsent_ = function(oldObject,absentBlock){var index;index=this._findIndex_(function(each){return $asNil$(oldObject)._61_(each)});if(index>=0)return this._removeAt_(index+1);return $asNil$(absentBlock)._value()}
Array.prototype._last = function(){return this[this.length-1]}
Array.prototype._ifEmpty_ = function(aBlock){if(true==this._isEmpty())return $asNil$(aBlock)._value();return this}
Array.prototype._notEmpty = function(){return this.length!=0}
Array.prototype._isArray = function(){return true}
Array.prototype._isCollection = function(){return true}
Array.prototype._associationsDo_ = function(aBlock){this._do_(aBlock);return this}
Array.prototype._detect_ifNone_ = function(aBlock,exceptionBlock){return this._detect_ifFound_ifNone_(aBlock,function(element){return element},exceptionBlock)}
Array.prototype._detect_ifFound_ = function(aBlock,foundBlock){this._detect_ifFound_ifNone_(aBlock,foundBlock,function(){return undefined});return this}
Array.prototype._asDictionary = function(){return this._as_(PjDictionary)}
Array.prototype._detect_ifFound_ifNone_ = function(aBlock,foundBlock,exceptionBlock){var $_err_$={};try{this._do_(function(each){if(true==$asNil$(aBlock)._value_(each))throw $_err_$=$asNil$(foundBlock)._cull_(each);else return undefined});return $asNil$(exceptionBlock)._value()}catch(e){if(e===$_err_$)return e;throw e}}
Array.prototype._addAll_ = function(aCollection){var $_self_$=this;$asNil$(aCollection)._do_(function(each){return $_self_$._add_(each)});return aCollection}
Array.prototype._remove_ = function(oldObject){var $_self_$=this;return this._remove_ifAbsent_(oldObject,function(){return $_self_$._errorNotFound_(oldObject)})}
Array.prototype._doWithIndex_ = function(elementAndIndexBlock){return this._withIndexDo_(elementAndIndexBlock)}
Array.prototype._allButLast = function(){return this._allButLast_(1)}
Array.prototype._copyWith_ = function(newElement){var newIC;newIC=$asNil$(this._species())._new_(this._size()+1);$asNil$(newIC)._replaceFrom_to_with_startingAt_(1,this._size(),this,1);$asNil$(newIC)._at_put_($asNil$(newIC)._size(),newElement);return newIC}
Array.prototype._allButFirst = function(){return this._allButFirst_(1)}
Array.prototype._copyReplaceFrom_to_with_ = function(start,stop,replacementCollection){var newSequenceableCollection,newSize,endReplacement;newSize=this._size()-stop-start+1+$asNil$(replacementCollection)._size();endReplacement=start-1+$asNil$(replacementCollection)._size();newSequenceableCollection=$asNil$(this._species())._new_(newSize);if(start>1)$asNil$(newSequenceableCollection)._replaceFrom_to_with_startingAt_(1,start-1,this,1);if(start<=endReplacement)$asNil$(newSequenceableCollection)._replaceFrom_to_with_startingAt_(start,endReplacement,replacementCollection,1);if(endReplacement<newSize)$asNil$(newSequenceableCollection)._replaceFrom_to_with_startingAt_(endReplacement+1,newSize,this,stop+1);return newSequenceableCollection}
Array.prototype._copyWithoutIndex_ = function(index){var copy;copy=$asNil$(this._species())._ofSize_(this._size()-1);$asNil$(copy)._replaceFrom_to_with_startingAt_(1,index-1,this,1);$asNil$(copy)._replaceFrom_to_with_startingAt_(index,$asNil$(copy)._size(),this,index+1);return copy}
Array.prototype._replaceFrom_to_with_ = function(start,stop,replacement){if(false==$asNil$($asNil$(replacement)._size())._61_(stop-start+1))this._error_("Size of replacement doesnt match");return this._replaceFrom_to_with_startingAt_(start,stop,replacement,1)}
Array.prototype._copyFrom_to_ = function(start,stop){var newSize;newSize=stop-start+1;return $asNil$($asNil$(this._species())._new_(newSize))._replaceFrom_to_with_startingAt_(1,newSize,this,start)}
Array.prototype._allButFirst_ = function(n){return this._copyFrom_to_(n+1,this._size())}
Array.prototype._from_to_put_ = function(startIndex,endIndex,anObject){var written,toWrite,thisWrite;if(startIndex>endIndex)return this;this._at_put_(startIndex,anObject);written=1;toWrite=endIndex-startIndex+1;while(written<toWrite){thisWrite=$asNil$(written)._min_(toWrite-written);this._replaceFrom_to_with_startingAt_(startIndex+written,startIndex+written+thisWrite-1,this,startIndex);written=written+thisWrite}return anObject}
Array.prototype._copyWithFirst_ = function(newElement){var newIC;newIC=$asNil$(this._species())._ofSize_(this._size()+1);$asNil$(newIC)._replaceFrom_to_with_startingAt_(2,this._size()+1,this,1);$asNil$(newIC)._at_put_(1,newElement);return newIC}
Array.prototype._grownBy_ = function(length){var newCollection,size;size=this._size();newCollection=$asNil$(this._species())._ofSize_(size+length);$asNil$(newCollection)._replaceFrom_to_with_startingAt_(1,size,this,1);return newCollection}
Array.prototype._allButLast_ = function(n){return this._copyFrom_to_(1,this._size()-n)}
Array.__proto__._newFrom_ = function(aCollection){var newCollection;newCollection=this._new_($asNil$(aCollection)._size());$asNil$(newCollection)._addAll_(aCollection);return newCollection}
Object._subclass_(String);
String.prototype._asLowerCase = function(){return this.toLowerCase()}
String.prototype._asciiValue = function(){return this.charCodeAt(0)}
String.prototype._charCode = function(){return this.charCodeAt(0)}
String.prototype._asInteger = function(){return this.charCodeAt(0)}
String.prototype._ifEmpty_ = function(aBlock){if(true==this._isEmpty())return $asNil$(aBlock)._value();return this}
String.prototype._notEmpty = function(){return this!=""}
String.prototype._to_ = function(other){return $asNil$($asNil$(this._asciiValue())._to_($asNil$(other)._asciiValue()))._collect_(function(ascii){return $asNil$(ascii)._asCharacter()})}
String.prototype._asElementId = function(){return $asNil$(document)._getElementById_(this)}
String.prototype._allButLast = function(){return this.substring(0,this._size()-1)}
String.prototype._asSymbol = function(){return this}
String.prototype._endsWith_ = function(suffix){return $asNil$(this.substring(this._size()-$asNil$(suffix)._size()))._61_(suffix)}
String.prototype._126_61_ = function(other){return this!=other}
String.prototype._44_ = function(other){return this+other}
String.prototype._61_ = function(other){return this==other}
String.prototype._asCharacter = function(){return this.charAt(0)}
String.prototype._copyFrom_ = function(start){return this.substring(start-1)}
String.prototype._at_ = function(index){return this[index - 1];}
String.prototype._first_ = function(n){return this.substring(0,n)}
String.prototype._asString = function(){return this}
String.prototype._at_put_ = function(index,anObject){throw new Error("cannot mutate strings");}
String.prototype._62_61_ = function(other){return this>=other}
String.prototype._isLetter = function(){var first;first=((this.charAt(0)).toUpperCase()).charCodeAt(0);if(first<65)return false;return first<=90}
String.prototype._60_ = function(other){return this<other}
String.prototype._codePoint = function(){return this.charCodeAt(0)}
String.prototype._first = function(){return this._at_(1)}
String.prototype._isEmpty = function(){return this==""}
String.prototype._size = function(){return this.length}
String.prototype._proxyResponse = function(){return { basic: ""+this}}
String.prototype._60_61_ = function(other){return this<=other}
String.prototype._allButFirst = function(){return this.substring(1)}
String.prototype._collect_ = function(aBlock){var arr;arr=this.split("");for(var idx=1,$1=this._size();idx<=$1;++idx){$asNil$(arr)._at_put_(idx,$asNil$(aBlock)._value_($asNil$(arr)._at_(idx)))}return arr.join("")}
String.prototype._isString = function(){return true}
String.prototype._62_ = function(other){return this>other}
String.prototype._join_ = function(anArray){return anArray.join(this)}
String.prototype._last = function(){return this._at_(this._size())}
String.prototype._allButLast_ = function(n){return this.substring(0,this._size()-n)}
String.prototype._allButFirst_ = function(n){return this.substring(n)}
String.prototype._asRegex = function(){return new RegExp(this)}
String.prototype._beginsWith_ = function(prefix){return $asNil$(this.substring(0,$asNil$(prefix)._size()))._61_(prefix)}
String.prototype._asUpperCase = function(){return this.toUpperCase()}
String.prototype._capitalized = function(){if(true==this._isEmpty())return this;return $asNil$((this.charAt(0)).toUpperCase())._44_(this.substring(1))}
String.prototype._asElementSelector = function(){return $asNil$(document)._querySelector_(this)}
String.prototype._copyFrom_to_ = function(start,stop){return this.substring(start-1,stop)}
String.__proto__._new = function(){return ""}
String.__proto__._defaultSize = function(){return 10}
String.__proto__._value_ = function(anInteger){return String.fromCharCode(anInteger)}
String.__proto__._new_ = function(size){return ""}
Object._subclass_(PjCollection);
PjCollection.prototype._61_ = function(aMagnitude){return this._subclassResponsibility()}
PjCollection.prototype._isCollection = function(){return true}
PjCollection.prototype._associationsDo_ = function(aBlock){this._do_(aBlock);return this}
PjCollection.prototype._detect_ifNone_ = function(aBlock,exceptionBlock){return this._detect_ifFound_ifNone_(aBlock,function(element){return element},exceptionBlock)}
PjCollection.prototype._detect_ifFound_ = function(aBlock,foundBlock){this._detect_ifFound_ifNone_(aBlock,foundBlock,function(){return undefined});return this}
PjCollection.prototype._asDictionary = function(){return this._as_(PjDictionary)}
PjCollection.prototype._detect_ifFound_ifNone_ = function(aBlock,foundBlock,exceptionBlock){var $_err_$={};try{this._do_(function(each){if(true==$asNil$(aBlock)._value_(each))throw $_err_$=$asNil$(foundBlock)._cull_(each);else return undefined});return $asNil$(exceptionBlock)._value()}catch(e){if(e===$_err_$)return e;throw e}}
PjCollection.prototype._addAll_ = function(aCollection){var $_self_$=this;$asNil$(aCollection)._do_(function(each){return $_self_$._add_(each)});return aCollection}
PjCollection.prototype._remove_ = function(oldObject){var $_self_$=this;return this._remove_ifAbsent_(oldObject,function(){return $_self_$._errorNotFound_(oldObject)})}
PjCollection.__proto__._new_ = function(ignored){return this._new()}
PjCollection.__proto__._newFrom_ = function(aCollection){var newCollection;newCollection=this._new_($asNil$(aCollection)._size());$asNil$(newCollection)._addAll_(aCollection);return newCollection}
PjCollection._subclass_(PjDictionary);
Object._subclass_(PjMagnitude);
PjMagnitude.prototype._61_ = function(aMagnitude){return this._subclassResponsibility()}
PjMagnitude.prototype._60_ = function(aMagnitude){return this._subclassResponsibility()}
PjMagnitude.prototype._max_ = function(aMagnitude){if(this>aMagnitude)return this;else return aMagnitude}
PjMagnitude.prototype._compareWith_ifLesser_ifEqual_ifGreater_ = function(anotherMagnitude,lesserBlock,equalBlock,greaterBlock){var $_self_$=this;return $asNil$((this<anotherMagnitude))._ifTrue_ifFalse_(lesserBlock,function(){return $asNil$(($_self_$==anotherMagnitude))._ifTrue_ifFalse_(equalBlock,greaterBlock)})}
PjMagnitude.prototype._60_61_ = function(aMagnitude){return $asNil$((this>aMagnitude))._not()}
PjMagnitude.prototype._between_and_ = function(min,max){if(this>=min)return this<=max;else return false}
PjMagnitude.prototype._min_max_ = function(aMin,aMax){return $asNil$(this._min_(aMin))._max_(aMax)}
PjMagnitude.prototype._62_ = function(aMagnitude){return aMagnitude<this}
PjMagnitude.prototype._min_ = function(aMagnitude){if(this<aMagnitude)return this;else return aMagnitude}
PjMagnitude.prototype._62_61_ = function(aMagnitude){return aMagnitude<=this}
PjMagnitude._subclass_(PjLookupKey);
PjLookupKey.prototype._key_ = function(anObject){this.key=anObject;return this}
PjLookupKey.prototype._key = function(){return this.key}
PjLookupKey.prototype._60_ = function(aLookupKey){return this.key<$asNil$(aLookupKey)._key()}
PjLookupKey.prototype._61_ = function(aLookupKey){if(true==$asNil$(this._species())._61_($asNil$(aLookupKey)._species()))return $asNil$(this.key)._61_($asNil$(aLookupKey)._key());else return false}
PjLookupKey.__proto__._key_ = function(aKey){return $asNil$(this._basicNew())._key_(aKey)}
PjLookupKey._subclass_(PjAssociation);
PjAssociation.prototype._value_ = function(anObject){this.value=anObject;return this}
PjAssociation.prototype._value = function(){return this.value}
PjAssociation.prototype._61_ = function(anAssociation){if(PjLookupKey.prototype==anAssociation)return $asNil$(this.value)._61_($asNil$(anAssociation)._value());else return false}
PjAssociation.prototype._key_value_ = function(aKey,anObject){this.key=aKey;this.value=anObject;return this}
PjAssociation.__proto__._key_value_ = function(newKey,newValue){return $asNil$(this._basicNew())._key_value_(newKey,newValue)}
Number._javascriptInitialize();
PjUndefinedObject._javascriptInitialize();
function PjDOMApplication(){};
function PjWebsocketDelegate(){};
function PjFileBasedBrowserApp(){};
function PjApplication(){};
function PjBrowserApplication(){};
function PjMinimalApp(){};
Object._subclass_(PjWebsocketDelegate);
PjWebsocketDelegate.prototype._onOpen_ = function(event){return this}
PjWebsocketDelegate.prototype._isConnected = function(){if(this.webSocket==undefined)return false;return $asNil$(this.webSocket)._readyState()===$asNil$(WebSocket)._OPEN()}
PjWebsocketDelegate.prototype._initWebSocket = function(){var $_self_$=this;$asNil$(this.webSocket)._instVarNamed_put_("onopen",function(event){return $_self_$._onOpen_(event)});$asNil$(this.webSocket)._instVarNamed_put_("onmessage",function(event){return $_self_$._onMessage_(event)});$asNil$(this.webSocket)._instVarNamed_put_("onclose",function(event){return $_self_$._onClose_(event)});$asNil$(this.webSocket)._instVarNamed_put_("onerror",function(event){return $_self_$._onError_(event)});return this}
PjWebsocketDelegate.prototype._connectTo_ = function(urlString){this.webSocket=$asNil$(WebSocket)._new_(urlString);this._initWebSocket();return this}
PjWebsocketDelegate.prototype._onMessage_ = function(event){return this}
PjWebsocketDelegate.prototype._onClose_ = function(event){return this}
PjWebsocketDelegate.prototype._onError_ = function(event){return this}
PjWebsocketDelegate.prototype._isClosed = function(){if(this.webSocket==undefined)return true;return $asNil$(this.webSocket)._readyState()===$asNil$(WebSocket)._CLOSED()}
PjWebsocketDelegate.prototype._close = function(){$asNil$(this.webSocket)._close();return this}
PjWebsocketDelegate.__proto__._connectToTag_ = function(tagString){return this._connectToUrl_("ws://"+$asNil$(location)._host()+"/"+tagString)}
PjWebsocketDelegate.__proto__._connectToUrl_ = function(urlString){var newInstance;newInstance=this._new();$asNil$(newInstance)._connectTo_(urlString);return newInstance}
Object._subclass_(PjApplication);
PjApplication.__proto__._stop = function(){if(this._currentInstance()==undefined)return this;$asNil$(this._currentInstance())._stop();return this}
PjApplication.__proto__._currentInstance = function(){return this.currentInstance}
PjApplication.__proto__._start = function(){if(this._currentInstance()==undefined)this.currentInstance=this._new();$asNil$(this._currentInstance())._start();return this}
PjApplication.__proto__._resetCurrentInstance = function(){this.currentInstance=undefined;return this}
PjApplication._subclass_(PjDOMApplication);
PjDOMApplication.prototype._showDomElementAt_ = function(elementId){this._domElementAt_setAttribute_to_(elementId,"style","display:block;");return this}
PjDOMApplication.prototype._domElementAt_ = function(elementId){return $asNil$(document)._getElementById_(elementId)}
PjDOMApplication.prototype._replaceContentsOf_with_ = function(elementId,aString){$asNil$(this._domElementAt_(elementId))._innerHTML_(aString);return this}
PjDOMApplication.prototype._subscribeToDeviceEvents = function(){return this}
PjDOMApplication.prototype._domElementAt_setAttribute_to_ = function(elementId,attributeName,attributeValue){$asNil$(this._domElementAt_(elementId))._setAttribute_to_(attributeName,attributeValue);return this}
PjDOMApplication.prototype._setClassOf_to_ = function(elementId,attributeValue){return this._domElementAt_setAttribute_to_(elementId,"class",attributeValue)}
PjDOMApplication.prototype._hideDomElementAt_ = function(elementId){this._domElementAt_setAttribute_to_(elementId,"style","display:none;");return this}
PjDOMApplication._subclass_(PjBrowserApplication);
PjBrowserApplication.prototype._start = function(){this._subscribeToDeviceEvents();return this}
PjBrowserApplication.prototype._stop = function(){return this}
PjBrowserApplication._subclass_(PjFileBasedBrowserApp);
PjFileBasedBrowserApp._subclass_(PjMinimalApp);
Smalltalk._registerDnuForAll_(["%",",","=","CLOSED","OPEN","abs","add:","addAll:","addLast:","adoptInstance:","allButFirst:","allButLast:","allSubclassesDo:","apply:with:","arguments","as:","asCharacter","asString","asciiValue","associationsDo:","at:","at:put:","basicNew","basicNew:","basicNew:with:","basicNew:with:with:","basicNew:with:with:with:","basicNew:with:with:with:with:","call:","call:with:","call:with:with:","call:with:with:with:","canUnderstand:","class","className","close","collect:","connectTo:","connectToUrl:","copyFrom:to:","cull:","currentInstance","detect:ifFound:ifNone:","do:","domElementAt:","domElementAt:setAttribute:to:","emptyJavascriptObject","ensure:","error:","errorNotFound:","even","findIndex:","fractionPart","getElementById:","handleDNU:for:","host","ifTrue:ifFalse:","includesKey:","indexOf:","inheritsFrom:","initNilInJs","initObject","initThrowInJs","initWebSocket","initialize","innerHTML:","instVarNamed:","instVarNamed:put:","installDNU:arguments:selector:js:for:else:","integerPart","isEmpty","isLetter","js_apply:args:","js_call:","js_call:with:","js_charAt:","js_charCodeAt:","js_defineProperty:field:properties:","js_forEach:","js_fromCharCode:","js_hasOwnProperty:","js_join:","js_log:","js_parse:","js_pop","js_push:","js_shift","js_split:","js_substring:","js_substring:to:","js_toLowerCase","js_toString","js_toUpperCase","key","key:","key:value:","keysAndValuesDo:","keysDo:","ln","log:","makeDNU:","makeGetter:","makeJavascriptSelector:","makeSetter:","makeSubclass","max:","messageClass:","messageText:","metaclassClass:","metaclassOf:","min:","name","new","new:","newFrom:","nilIfUndefined","nilInJs:","nilTestFunctionName","not","notNil","ofSize:","onClose:","onError:","onMessage:","onOpen:","printString","propertySet:","prototype","querySelector:","readyState","registerDnu:","remove:ifAbsent:","removeAt:","replaceFrom:to:with:startingAt:","rounded","selector","setAttribute:to:","sign","signal","signal:","size","species","start","stop","subclassResponsibility","subclasses","subclassesDo:","subscribeToDeviceEvents","superclass","throwFunction","throwFunctionName","to:","to:by:do:","to:do:","truncated","typeof","value","value:","value:value:","valuesDo:","whileFalse:","whileTrue:","with:","withIndexDo:","yourself"]);
var process=process||{exit:function(){window.close()}};
function PjEvaluatorWebsocketDelegate(){};
PjWebsocketDelegate._subclass_(PjEvaluatorWebsocketDelegate);
PjEvaluatorWebsocketDelegate.prototype._timeout_for_ = function(aBlock,milliseconds){setTimeout(aBlock,milliseconds)}
PjEvaluatorWebsocketDelegate.prototype._logReceived_ = function(aString){$asNil$(console)._log_("Received: "+aString);return this}
PjEvaluatorWebsocketDelegate.prototype._reconnect = function(){if(false==this.shouldRetryToConnectToServer)return this;PjWebsocketDelegate.prototype._connectTo_.call(this,this.bridgeUrlString);return this}
PjEvaluatorWebsocketDelegate.prototype._doCallBack_ = function(aResult){$asNil$(this.webSocket)._send_(aResult);this._logSent_(aResult);return this}
PjEvaluatorWebsocketDelegate.prototype._connectTo_ = function(urlString){this.shouldRetryToConnectToServer=true;this.bridgeUrlString=urlString;PjWebsocketDelegate.prototype._connectTo_.call(this,urlString);return this}
PjEvaluatorWebsocketDelegate.prototype._onMessage_ = function(event){var aString,$_self_$=this;aString=$asNil$(event)._data();this._logReceived_(aString);if($asNil$(aString)._first()==":")return this._command_(aString);this._timeout_for_(function(){aString=$_self_$._eval_(aString);if(false==$_self_$._isClosed())$asNil$($_self_$.webSocket)._send_(aString);return $_self_$._logSent_(aString)},0);return this}
PjEvaluatorWebsocketDelegate.prototype._onClose_ = function(event){this._reconnect();return this}
PjEvaluatorWebsocketDelegate.prototype._onError_ = function(event){this._reconnect();return this}
PjEvaluatorWebsocketDelegate.prototype._logSent_ = function(aString){$asNil$(console)._log_("Sent: "+aString);return this}
PjEvaluatorWebsocketDelegate.prototype._makeBlockClosureProxy_ = function(withThis){return this._makeBlockClosureProxy_stopPropagation_(withThis,true)}
PjEvaluatorWebsocketDelegate.prototype._makeBlockClosureProxy_stopPropagation_ = function(withThis,stop){var self=this;
function PjBlockClosureProxy(ev){
callback(PjBlockClosureProxy.$_jsName,ev,this);
return true;
};
function callback(name,ev,jsThis) {
if (stop) ev.stopPropagation();
self._doCallBack_(JSON.stringify({cb : [name,
Object._resultObject_(ev),
Object._resultObject_(withThis?jsThis:undefined)]}));
}
PjBlockClosureProxy.$PjRefCount=0;
return PjBlockClosureProxy;}
PjEvaluatorWebsocketDelegate.prototype._command_ = function(aString){var top = (function(){return this})(),
match = aString.match(/^:(.)((\$_)?.*)/),
op = match[1],
name = match[2],
obj = top[name];
if (obj && op=="-") {
obj.$_jsName = undefined;
if (match[2])
delete top[name]
}}
PjEvaluatorWebsocketDelegate.prototype._eval_ = function(aString){var result;
try{
result = Object._resultObject_((function(){return this.eval(aString)})());
}catch(exception){
result={exception:exception.message};
}
try{
return JSON.stringify(result);
}catch(stringifyException){
return JSON.stringify({exception:stringifyException.message});
}}
PjEvaluatorWebsocketDelegate.prototype._close = function(){this.shouldRetryToConnectToServer=false;PjWebsocketDelegate.prototype._close.call(this);return this}
PjEvaluatorWebsocketDelegate.__proto__._set_callback_to_ = function(anObject,aString,callback){aString="on"+aString;
console.log(aString);
var old=anObject[aString];
console.log(callback);
console.log(typeof callback);
console.log(old);
anObject[aString]=callback;
console.log(anObject[aString]);
if (callback && callback.hasOwnProperty("$PjRefCount")) {
++callback.$PjRefCount;
}
if (old && old.$PjRefCount && --old.$PjRefCount==0) {
old.$PjProxyRemove = true;
return old;
}
return true;}
PjEvaluatorWebsocketDelegate.__proto__._initialize = function(){"JSON Math WebSocket console global document history location navigator screen window localStorage module process require".split(" ").forEach(function(s){
if(this[s]){
try{Object.defineProperty(this[s],"$_jsName",{value:s,writable:true})}catch(s){};
}})}
PjEvaluatorWebsocketDelegate.__proto__._default = function(){return this.default}
PjEvaluatorWebsocketDelegate.__proto__._terminate = function(){var $_self_$=this;(function(){return $_self_$._closeDefault()})._on_do_(Error,function(){return undefined});(function(){return $asNil$(process)._exit()})._on_do_(Error,function(){return undefined});return this}
PjEvaluatorWebsocketDelegate.__proto__._connectDefaultToUrl_ = function(urlString){var newInstance;newInstance=this._connectToUrl_(urlString);this._default_(newInstance);return this}
PjEvaluatorWebsocketDelegate.__proto__._connectDefaultToTag_ = function(tagString){var newInstance;newInstance=this._connectToTag_(tagString);this._default_(newInstance);return this}
PjEvaluatorWebsocketDelegate.__proto__._default_ = function(newInstance){this.default=newInstance;return this}
PjEvaluatorWebsocketDelegate.__proto__._closeDefault = function(){$asNil$(this._default())._close();return this}
PjEvaluatorWebsocketDelegate.__proto__._reload = function(){this._closeDefault();$asNil$(location)._reload_(true);return this}
Smalltalk._registerDnuForAll_(["closeDefault","command:","connectDefaultToUrl:","connectToTag:","data","default","default:","eval:","exit","first","isClosed","logReceived:","logSent:","makeBlockClosureProxy:stopPropagation:","on:do:","reconnect","reload:","send:","timeout:for:"]);
PjEvaluatorWebsocketDelegate._initialize();
(function(appClass,webSocketDelegateClass,url){return function(){$asNil$(appClass)._start();return $asNil$(webSocketDelegateClass)._connectDefaultToUrl_(url)}})(PjMinimalApp,PjEvaluatorWebsocketDelegate,"ws://localhost:3210/javascript-bridge")();
