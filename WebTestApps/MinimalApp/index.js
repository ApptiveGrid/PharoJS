function JbWebSocketDelegate(){};function JbUndefinedObject(){};function OrderedCollection(){};function JbCollection(){};function Set(){};function JbEvaluatorWebSocketDelegate(){};JbWebSocketDelegate.prototype._onMessage_ = function(event){	return this;};JbWebSocketDelegate.prototype._onOpen_ = function(event){	return this;};JbWebSocketDelegate.prototype._close = function(){	$asNil$(this.webSocket)._close();	return this;};JbWebSocketDelegate.prototype._initWebSocket = function(){var self=this;	$asNil$(this.webSocket).onopen = (function(event){		return self._onOpen_(event);	});	$asNil$(this.webSocket).onmessage = (function(event){		return self._onMessage_(event);	});	$asNil$(this.webSocket).onclose = (function(event){		return self._onClose_(event);	});	$asNil$(this.webSocket).onerror = (function(event){		return self._onError_(event);	});	return this;};JbWebSocketDelegate.prototype._isConnected = function(){	var $_err_$ = {}; try{	$asNil$(this.webSocket)._ifNil_((function(){		throw ($_err_$=false);	}));	return $asNil$(this.webSocket).readyState===WebSocket.OPEN;}catch(exception){	if($_err_$ === exception){		return exception;	}else{		throw exception;	}}};JbWebSocketDelegate.prototype._connectTo_ = function(urlString){	this.webSocket = new WebSocket(urlString);	window.Jb_this = this;	this._initWebSocket();	return this;};JbWebSocketDelegate.prototype._onError_ = function(event){	return this;};JbWebSocketDelegate.prototype._onClose_ = function(event){	return this;};JbWebSocketDelegate.prototype._isClosed = function(){	var $_err_$ = {}; try{	$asNil$(this.webSocket)._ifNil_((function(){		throw ($_err_$=true);	}));	return $asNil$(this.webSocket).readyState===WebSocket.CLOSED;}catch(exception){	if($_err_$ === exception){		return exception;	}else{		throw exception;	}}};JbWebSocketDelegate._connectToTag_ = function(tagString){	return this._connectToUrl_($asNil$("ws://"+location.host+"/").__44(tagString));};JbWebSocketDelegate._connectToUrl_ = function(urlString){	var newInstance;	newInstance = this._new();	$asNil$(newInstance)._connectTo_(urlString);	return newInstance;};JbWebSocketDelegate.__proto__ = Object;JbWebSocketDelegate.prototype.__proto__ = Object.prototype;JbUndefinedObject.prototype._isNil = function(){	return true;};JbUndefinedObject.prototype._value = function(){	return undefined;};JbUndefinedObject.prototype.__61 = function(other){	return undefined==other;};JbUndefinedObject.prototype._ifNil_ = function(aBlock){	return aBlock();};JbUndefinedObject.prototype._ifNotNil_ = function(aBlock){	return this;};JbUndefinedObject._initialize = function(){var self=this;	this._install_asGlobalNamed_((function(value){		if(undefined==value){			return self.nilValue;		}		return value;	}),"$asNil$");	this.nilValue = JbUndefinedObject.__proto__._new.call(this);	return this;};JbUndefinedObject._new = function(){	return Error._signal_("cannot create instances of UndefinedObject");};JbUndefinedObject.__proto__ = Object;JbUndefinedObject.prototype.__proto__ = Object.prototype;Object.prototype._instVarNamed_ = function(varName){	return this[varName];};Object.prototype._asJson = function(){	return JSON.stringify(this);};Object.prototype._instVarNames = function(){	return Object.keys(this);};Object.prototype._yourself = function(){	return this;};Object.prototype._className = function(){	return this.constructor._name();};Object.prototype._flag_ = function(aSymbol){	return this;};Object.prototype._instVarNamed_put_ = function(varName,newValue){	return this[varName] = newValue;};Object.prototype._isNil = function(){	return false;};Object.prototype._initialize = function(){	return this;};Object.prototype.__61 = function(other){	return this===other;};Object.prototype._class = function(){	return this.constructor;};Object.prototype._ifNil_ = function(aBlock){	return this;};Object.prototype._value = function(){	return this;};Object.prototype._localSlotNames = function(){	return Object.keys(this);};Object.prototype._ifNotNil_ = function(aBlock){	return aBlock();};Object._new_ = function(anObject){	var newInstance;	newInstance = this._basicNew_(anObject);	$asNil$(newInstance)._initialize();	return newInstance;};Object._basicNew = function(){	return new this()};Object._newFromJsonString_ = function(jsonString){	var newInstance;	newInstance = JSON.parse(jsonString);	this._adoptInstance_(newInstance);	return newInstance;};Object._instVarNames = function(){	return Object.keys(this);};Object._adoptInstance_ = function(anObject){	anObject.__proto__ = this.prototype;};Object._new = function(){	var newInstance;	newInstance = this._basicNew();	$asNil$(newInstance)._initialize();	return newInstance;};Object._basicNew_ = function(anObject){	return new this(anObject);};Object._install_asGlobalNamed_ = function(anObject,jsName){	(function(){this[jsName]=anObject})()};Object._name = function(){	return this.name;};OrderedCollection.prototype._addAll_ = function(objects){var self=this;	$asNil$(objects)._do_((function(each){		return self._add_(each);	}));	return this;};OrderedCollection.prototype._addFirst_ = function(anObject){	this.unshift(anObject);	return this;};OrderedCollection.prototype._addLast_ = function(anObject){	this.push(anObject);	return this;};OrderedCollection.prototype._add_ = function(anObject){	this._addLast_(anObject);	return this;};OrderedCollection._new_ = function(size){	var newInstance;	newInstance = OrderedCollection.__proto__._new_.call(this,size);	$asNil$(newInstance).__proto__ = this.prototype;	return newInstance;};OrderedCollection.__proto__ = Array;OrderedCollection.prototype.__proto__ = Array.prototype;Error.prototype._messageText_ = function(signalerText){	this.message = signalerText;	return this;};Error.prototype._signal = function(){	throw (this);	return this;};Error.prototype._signal_ = function(signalerText){	this._messageText_(signalerText);	return this._signal();};Error._signal = function(){	return $asNil$(this._new())._signal();};Error._signal_ = function(message){	return $asNil$(this._new())._signal_(message);};Error.__proto__ = Object;Array.prototype._last = function(){	return this._at_(this._size());};Array.prototype._size = function(){	return this.length;};Array.prototype._detect_ifNone_ = function(aBlock,exceptionBlock){	return this._detect_ifFound_ifNone_(aBlock,(function(element){		return element;	}),exceptionBlock);};Array.prototype._isEmpty = function(){	return $asNil$(this._size()).__61(0);};Array.prototype._first = function(){	return this._at_(1);};Array.prototype._detect_ifFound_ = function(aBlock,foundBlock){	this._detect_ifFound_ifNone_(aBlock,foundBlock,(function(){		return undefined;	}));	return this;};Array.prototype._ifEmpty_ = function(aBlock){	if(this._isEmpty()){		return typeof aBlock=="function"?aBlock():aBlock;	}	return this;};Array.prototype._notEmpty = function(){	return this._size()>0;};Array.prototype._doWithIndex_ = function(aBlock){	this.forEach((function(element,index){		return $asNil$(aBlock)._value_value_(element,typeof index=="number"?index+1:$asNil$(index).__43(1));	}));	return this;};Array.prototype._at_put_ = function(index,anObject){	this[index - 1] = anObject;};Array.prototype._at_ = function(index){	return this[index - 1];};Array.prototype.__61 = function(other){	var $_err_$ = {}; try{	if(!($asNil$(this._size()).__61($asNil$(other)._size()))){		return false;	}	this._doWithIndex_((function(element,index){		if(!($asNil$(element).__61($asNil$(other)._at_(index)))){			throw ($_err_$=false);		}	}));	return true;}catch(exception){	if($_err_$ === exception){		return exception;	}else{		throw exception;	}}};Array.prototype._class = function(){	return this.constructor;};Array.prototype._collect_ = function(aBlock){	var newCollection;	newCollection = $asNil$(this._class())._new_(this._size());	this._doWithIndex_((function(element,index){		return $asNil$(newCollection)._at_put_(index,$asNil$(aBlock)._value_(element));	}));	return newCollection;};Array.prototype._detect_ifFound_ifNone_ = function(aBlock,foundBlock,notFoundBlock){var self=this;	var $_err_$ = {}; try{	this._do_((function(each){		if($asNil$(aBlock)._value_(each)){			throw ($_err_$=$asNil$(foundBlock)._cull_(each));		}		return self;	}));	return typeof notFoundBlock=="function"?notFoundBlock():notFoundBlock;}catch(exception){	if($_err_$ === exception){		return exception;	}else{		throw exception;	}}};Array.prototype._do_ = function(aBlock){	this.forEach(aBlock);	return this;};Array._new_ = function(size){	return [];};Array._defaultSize = function(){	return 10;};Array._new = function(){	return this._new_(this._defaultSize());};Array.__proto__ = Object;JbCollection.__proto__ = Object;JbCollection.prototype.__proto__ = Object.prototype;Boolean.prototype._asBit = function(){	if(this){		return 1;	}else{		return 0;	}};Boolean.prototype.__124 = function(aBoolean){	if(this){		return true;	}else{		return aBoolean;	}};Boolean.prototype._ifTrue_ifFalse_ = function(tBlock,fBlock){	if(this){		return typeof tBlock=="function"?tBlock():tBlock;	}else{		return typeof fBlock=="function"?fBlock():fBlock;	}};Boolean.prototype._not = function(){	if(this){		return false;	}else{		return true;	}};Boolean.prototype._ifFalse_ifTrue_ = function(fBlock,tBlock){	if(this){		return typeof tBlock=="function"?tBlock():tBlock;	}else{		return typeof fBlock=="function"?fBlock():fBlock;	}};Boolean.prototype._ifTrue_ = function(tBlock){	if(this){		return typeof tBlock=="function"?tBlock():tBlock;	}else{		return undefined;	}};Boolean.prototype._or_ = function(alternativeBlock){	if(this){		return true;	}else{		return typeof alternativeBlock=="function"?alternativeBlock():alternativeBlock;	}};Boolean.prototype._ifFalse_ = function(fBlock){	if(this){		return undefined;	}else{		return typeof fBlock=="function"?fBlock():fBlock;	}};Boolean.prototype._xor_ = function(aBoolean){	if(this){		return $asNil$(typeof aBoolean=="function"?aBoolean():aBoolean)._not();	}else{		return typeof aBoolean=="function"?aBoolean():aBoolean;	}};Boolean.prototype.__38 = function(aBoolean){	if(this){		return aBoolean;	}else{		return false;	}};Boolean.prototype._and_ = function(alternativeBlock){	if(this){		return typeof alternativeBlock=="function"?alternativeBlock():alternativeBlock;	}else{		return false;	}};Boolean._javaScriptName = function(){	return "Boolean";};Boolean._new = function(){	return Error._signal_("cannot create instances of Boolean");};Boolean.__proto__ = Object;Set.__proto__ = OrderedCollection;Set.prototype.__proto__ = OrderedCollection.prototype;Function.prototype._cull_cull_ = function(arg1,arg2){	return this(arg1,arg2);};Function.prototype._value_value_ = function(arg1,arg2){	return this(arg1,arg2);};Function.prototype._cull_ = function(arg){	return this(arg);};Function.prototype._ensure_ = function(aBlock){	try{		return this();	}finally{aBlock();};	return this;};Function.prototype._value = function(){	return this();};Function.prototype._value_ = function(arg){	return this(arg);};Function.prototype._valueWithArguments_ = function(anArray){	return this.apply(this,anArray)};Function._initialize = function(){	this._install_asGlobalNamed_(this,"BlockClosure");	this._flag_("todo");	return this;};Function.__proto__ = Object;String.prototype._last = function(){	return this._at_(this._size());};String.prototype._size = function(){	return this.length;};String.prototype._isEmpty = function(){	return $asNil$(this._size()).__61(0);};String.prototype._first = function(){	return this._at_(1);};String.prototype._ifEmpty_ = function(aBlock){	if(this._isEmpty()){		return typeof aBlock=="function"?aBlock():aBlock;	}	return this;};String.prototype.__44 = function(other){	return this+other;};String.prototype._notEmpty = function(){	return this._size()>0;};String.prototype._at_put_ = function(index,anObject){	throw new Error("cannot mutate strings");};String.prototype._at_ = function(index){	return this[index - 1];};String.prototype.__61 = function(other){	return this==other;};String.prototype._isLetter = function(){	var firstLetter, firstCode;	firstLetter = $asNil$(this.charAt(0)).toUpperCase();	firstCode = $asNil$(firstLetter).charCodeAt(0);	if(firstCode<65){		return false;	}	if(firstCode>90){		return false;	}	return true;};String._new_ = function(size){	this._explicitRequirement();	return this;};String._defaultSize = function(){	return 10;};String._new = function(){	return this._new_(this._defaultSize());};String.__proto__ = Object;Number.prototype._ln = function(){	return Math.log(this);};Number.prototype._sqrt = function(){	return Math.sqrt(this);};Number.prototype._log = function(){	return Math.log10(this);};Number.prototype._arcCos = function(){	return Math.acos(this);};Number.prototype._exp = function(){	return Math.exp(this);};Number.prototype._negated = function(){	return 0-this;};Number.prototype._arcSin = function(){	return Math.asin(this);};Number.prototype._reciprocal = function(){	return (1.0).__47(this);};Number.prototype._sign = function(){	if(this>0){		return 1;	}	if(this<0){		return -1;	}	return 0;};Number.prototype.__43 = function(other){	return typeof other=="number"?this+other:other._adaptToNumber_andSend_(this,"+");};Number.prototype.__45 = function(other){	return typeof other=="number"?this-other:other._adaptToNumber_andSend_(this,"-");};Number.prototype._tan = function(){	return Math.tan(this);};Number.prototype.__61 = function(other){	return this==other;};Number.prototype._cos = function(){	return Math.cos(this);};Number.prototype._abs = function(){	if(this<0){		return 0-this;	}	return this+0;};Number.prototype._arcTan = function(){	return Math.atan(this);};Number.prototype.__42 = function(other){	return typeof other=="number"?this*other:other._adaptToNumber_andSend_(this,"*");};Number.prototype.__47 = function(other){	return typeof this=="number"&&typeof other=="number"?this/other:this.__47(other);};Number.prototype._sin = function(){	return Math.sin(this);};Number._e = function(){	return Math.E;};Number._pi = function(){	return Math.PI;};Number.__proto__ = Object;JbEvaluatorWebSocketDelegate.prototype._onMessage_ = function(event){	var resultJson;	resultJson = this._eval_($asNil$(event).data);	$asNil$(this.webSocket).send(resultJson);	return resultJson;};JbEvaluatorWebSocketDelegate.prototype._doCallBack_ = function(aResult){	$asNil$(this.webSocket).send(aResult);	return this;};JbEvaluatorWebSocketDelegate.prototype._makeBlockClosureProxy_ = function(withThis){		var self=this;	function JbBlockClosureProxy(ev){			callback(JbBlockClosureProxy.$_jbName,ev,this);			return true;		};	function callback(name,ev,jsThis) {		self._doCallBack_(JSON.stringify({cb : [name,								self._resultObject_(ev),								self._resultObject_(withThis?jsThis:undefined)]}));	}	JbBlockClosureProxy.$JbRefCount=0;	return JbBlockClosureProxy;	};JbEvaluatorWebSocketDelegate.prototype._resultObject_ = function(result){	var name;		if (result == undefined) return { proxy : typeof result};		if (result.toLowerCase && result.toLowerCase===String.prototype.toLowerCase) result = ""+result;		if (typeof result == "object" || typeof result == "function") {			if (!(name = result.$_jbName)) {				if (result === window) name = "window";				else if (result === document) name = "document";				else if (result === console) name = "console";				else if (result === JSON) name = "JSON";				else {					this.$Jb_counter = (this.$Jb_counter||0)+1;					name = "$_"+this.$Jb_counter;					(function(){return this})()[name]=result;				}				result.$_jbName=name;			}			return { remove : result.$JbProxyRemove , proxy : name} // , length : (result instanceof Array || result.item) ? result.length : undefined , name : result.constructor && result.constructor.name}		}		return { basic : result }	};JbEvaluatorWebSocketDelegate.prototype._connectTo_ = function(urlString){var self=this;	var trials, maxTrials;	JbEvaluatorWebSocketDelegate.prototype.__proto__._connectTo_.call(this,urlString);	trials = 0;	maxTrials = 10;	$asNil$(this.webSocket).onerror = (function(event){		self._onError_(event);		if(trials<maxTrials){			self._connectTo_("ws://127.0.0.1:2222/javascript-bridge");		}else{			window.alert("Could not connect to PharoJS bridge");		}	});	return this;};JbEvaluatorWebSocketDelegate.prototype._eval_ = function(aString){	var result;	try{		result = this._resultObject_((function(){return this.eval(aString)})());	}catch(exception){		result={exception:exception.message};	}	try{		return JSON.stringify(result);	}catch(stringifyException){		return JSON.stringify({exception:stringifyException.message});	}};JbEvaluatorWebSocketDelegate._closeDefault = function(){	$asNil$(this._default())._close();	return this;};JbEvaluatorWebSocketDelegate._default_ = function(newInstance){	this.default = newInstance;	return this;};JbEvaluatorWebSocketDelegate._set_callback_to_ = function(anObject,aString,callback){	aString="on"+aString;	var old=anObject[aString];	anObject[aString]=callback;	if (callback && callback.hasOwnProperty("$JbRefCount")) {		++callback.$JbRefCount;	}	if (old && old.$JbRefCount && --old.$JbRefCount==0) {		old.$JbProxyRemove = true;		return old;	}	return true;	};JbEvaluatorWebSocketDelegate._default = function(){	return this.default;};JbEvaluatorWebSocketDelegate._connectDefaultToUrl_ = function(urlString){	var newInstance;	newInstance = this._connectToUrl_(urlString);	this._default_(newInstance);	return this;};JbEvaluatorWebSocketDelegate._reload = function(){	this._closeDefault();	location.reload(true);	return this;};JbEvaluatorWebSocketDelegate._connectDefaultToTag_ = function(tagString){	var newInstance;	newInstance = this._connectToTag_(tagString);	this._default_(newInstance);	return this;};JbEvaluatorWebSocketDelegate.__proto__ = JbWebSocketDelegate;JbEvaluatorWebSocketDelegate.prototype.__proto__ = JbWebSocketDelegate.prototype;JbUndefinedObject._initialize();Function._initialize();Object._new();JbEvaluatorWebSocketDelegate._connectDefaultToUrl_("ws://127.0.0.1:2222/javascript-bridge");